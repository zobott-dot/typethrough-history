<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypeThrough History</title>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&family=Special+Elite&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <header class="header">
        <h1>TypeThrough History</h1>
        <div class="tagline">A Typing Tutor for the Curious Mind</div>
        <div class="sound-controls">
            <button class="sound-btn active" id="soundToggle" onclick="toggleSound()">
                <span id="soundIcon">&#9835;</span>
            </button>
            <span class="sound-label">Typewriter</span>
        </div>
    </header>

    <main class="document">

        <!-- ===== START SCREEN ===== -->
        <div class="start-screen" id="startScreen">
            <div class="ornament">&#10087; &#10022; &#10087;</div>
            <h2 class="start-title">Begin Your Journey</h2>
            <p class="start-subtitle">Through the Early 20th Century</p>
            <p class="start-description">
                Type your way through the defining moments of a turbulent age &mdash;
                from the dawn of flight to the atomic era. Each passage teaches
                as you type. Choose an era or type them all.
            </p>
            <div class="start-era-list" id="eraList">
                <button class="era-btn selected" onclick="selectEra('all')">
                    <span class="era-name">All Eras</span>
                    <span class="era-years">1900&ndash;1945</span>
                </button>
                <button class="era-btn" onclick="selectEra('The New Century')">
                    <span class="era-name">The New Century</span>
                    <span class="era-years">1900&ndash;1913</span>
                </button>
                <button class="era-btn" onclick="selectEra('The Great War')">
                    <span class="era-name">The Great War</span>
                    <span class="era-years">1914&ndash;1918</span>
                </button>
                <button class="era-btn" onclick="selectEra('The Roaring Twenties')">
                    <span class="era-name">The Roaring Twenties</span>
                    <span class="era-years">1919&ndash;1929</span>
                </button>
                <button class="era-btn" onclick="selectEra('The Great Depression')">
                    <span class="era-name">The Great Depression</span>
                    <span class="era-years">1929&ndash;1939</span>
                </button>
                <button class="era-btn" onclick="selectEra('The World at War Again')">
                    <span class="era-name">The World at War Again</span>
                    <span class="era-years">1939&ndash;1945</span>
                </button>
            </div>
            <button class="btn btn-primary" onclick="startTyping()">Begin Typing</button>
            <button class="btn" onclick="showStats()">My Progress</button>
            <div class="version">v0.5.0</div>
        </div>

        <!-- ===== STATS DASHBOARD ===== -->
        <div class="stats-screen" id="statsScreen">
            <div class="ornament">&#10087; &#10022; &#10087;</div>
            <h2 class="start-title">Your Progress</h2>
            <div class="results-ornament">&mdash; &#10022; &mdash;</div>

            <div class="results-stats" style="margin-bottom: 2rem;">
                <div class="result-stat">
                    <span class="result-stat-value" id="statsTotalPassages">0</span>
                    <span class="result-stat-label">Completed</span>
                </div>
                <div class="result-stat">
                    <span class="result-stat-value" id="statsBestWpm">0</span>
                    <span class="result-stat-label">Best WPM</span>
                </div>
                <div class="result-stat">
                    <span class="result-stat-value" id="statsAvgWpm">0</span>
                    <span class="result-stat-label">Avg WPM</span>
                </div>
                <div class="result-stat">
                    <span class="result-stat-value" id="statsAvgAccuracy">0%</span>
                    <span class="result-stat-label">Avg Accuracy</span>
                </div>
            </div>

            <div class="stats-chart-section">
                <h3 class="stats-chart-title">Last 20 Sessions</h3>
                <div class="stats-chart" id="statsChart">
                    <div class="stats-chart-empty">Complete a few passages to see your trend here.</div>
                </div>
                <div class="stats-chart-labels">
                    <span>Older</span>
                    <span>Recent</span>
                </div>
            </div>

            <div class="stats-recent-section">
                <h3 class="stats-chart-title">Recent Passages</h3>
                <div class="stats-recent-list" id="statsRecentList">
                    <div class="stats-chart-empty">No passages completed yet.</div>
                </div>
            </div>

            <div class="button-row" style="margin-top: 1.5rem;">
                <button class="btn" onclick="clearStats()">Clear History</button>
                <button class="btn btn-primary" onclick="hideStats()">Back</button>
            </div>
        </div>

        <!-- ===== TYPING SCREEN ===== -->
        <div class="typing-screen" id="typingScreen">

            <div class="passage-info">
                <span class="passage-era" id="passageEra"></span>
                <span class="passage-count" id="passageCount"></span>
            </div>

            <h3 class="passage-title" id="passageTitle"></h3>

            <div class="passage-display" id="passageDisplay"></div>

            <div class="click-prompt" id="clickPrompt" onclick="activateTyping()">
                Click here or press any key to begin typing...
            </div>

            <input type="text" class="typing-input" id="typingInput"
                   autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">

            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="progressBar"></div>
            </div>

            <div class="live-stats" id="liveStats">
                <div class="stat">
                    <span class="stat-value" id="liveWpm">0</span>
                    <span class="stat-label">WPM</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="liveAccuracy">100%</span>
                    <span class="stat-label">Accuracy</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="liveProgress">0%</span>
                    <span class="stat-label">Progress</span>
                </div>
                <div class="stat stat-quit">
                    <button class="btn-quit" onclick="skipPassage()">Skip &rarr;</button>
                    <button class="btn-quit" onclick="quitToHome()">&larr; Quit</button>
                </div>
            </div>

            <!-- Results (shown after completing a passage) -->
            <div class="results" id="results">
                <h3 class="results-title">Passage Complete</h3>
                <div class="results-ornament">&mdash; &#10022; &mdash;</div>
                <div class="results-rating" id="resultsRating"></div>
                <div class="results-stats">
                    <div class="result-stat">
                        <span class="result-stat-value" id="finalWpm">0</span>
                        <span class="result-stat-label">Words per Minute</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-stat-value" id="finalAccuracy">0%</span>
                        <span class="result-stat-label">Accuracy</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-stat-value" id="finalErrors">0</span>
                        <span class="result-stat-label">Errors</span>
                    </div>
                </div>
                <div class="footnote" id="footnote">
                    <span class="footnote-label">Historical Footnote</span>
                    <span id="footnoteText"></span>
                </div>
                <div class="button-row">
                    <button class="btn" onclick="retryPassage()">Try Again</button>
                    <button class="btn" onclick="showStatsFromTyping()">My Progress</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextPassage()">Next Passage</button>
                </div>
            </div>

        </div>
    </main>

    <!-- Scripts loaded in order: data first, then engine, then app logic -->
    <script src="js/passages.js"></script>
    <script src="js/sounds.js"></script>
    <script src="js/app.js"></script>

</body>
</html>
